<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>Flex Time Killer</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="game-shell">

  <div class="hamburger" id="burgerBtn"><span></span><span></span><span></span></div>

  <div class="side-menu" id="sideMenu">
    <div class="side-menu-close" id="sideMenuClose">✕</div>
    <div class="side-menu-content">
      <h2>FLEX TIME KILLER</h2>
      <p>John might or might not put more stuff in here in the future.</p>
      <p class="side-menu-hint">Stay tuned... or don't.</p>
    </div>
  </div>
  <div class="side-menu-overlay" id="sideMenuOverlay"></div>

  <div class="device-zone">
    <div class="game-canvas-container">
      <canvas id="gameCanvas"></canvas>
      <div class="special-bar-touch" id="specialBarTouch"></div>
    </div>
    <div class="device-frame">
      <img id="frameImg" alt="" />
    </div>
  </div>

  <div class="controls-zone">
    <div class="controls-main">
      <div class="dpad-container">
        <div class="dpad-btn dpad-up" data-dir="up">▲</div>
        <div class="dpad-btn dpad-down" data-dir="down">▼</div>
        <div class="dpad-btn dpad-left" data-dir="left">◄</div>
        <div class="dpad-btn dpad-right" data-dir="right">►</div>
      </div>
      <div class="action-container">
        <div class="action-btn btn-a" data-btn="A">A</div>
        <div class="action-btn btn-b" data-btn="B">B</div>
      </div>
    </div>
    <div class="system-btns">
      <div class="sys-btn" data-btn="select">Select</div>
      <div class="sys-btn" data-btn="start">Start</div>
    </div>
  </div>

</div>
<script type="module" src="js/main.js"></script>
<script>
  // Debug: if module fails (e.g. file:// protocol), show message
  setTimeout(function(){
    var c=document.getElementById('gameCanvas');
    if(c&&c.getContext){
      var ctx=c.getContext('2d');
      // Check if anything was drawn (pixel at center)
      var px=ctx.getImageData(Math.floor(c.width/2),Math.floor(c.height/2),1,1).data;
      if(px[0]===0&&px[1]===0&&px[2]===0&&px[3]===0){
        ctx.fillStyle='#111';ctx.fillRect(0,0,c.width,c.height);
        ctx.font='bold 16px monospace';ctx.textAlign='center';ctx.fillStyle='#d4e20f';
        ctx.fillText('MODULE LOAD FAILED',c.width/2,c.height/2-30);
        ctx.font='12px monospace';ctx.fillStyle='#aaa';
        ctx.fillText('You must run a local server:',c.width/2,c.height/2);
        ctx.fillText('python -m http.server 8000',c.width/2,c.height/2+20);
        ctx.fillText('then open http://localhost:8000',c.width/2,c.height/2+40);
      }
    }
  },2000);
</script>
<script>
  const burger=document.getElementById('burgerBtn'),menu=document.getElementById('sideMenu'),
    overlay=document.getElementById('sideMenuOverlay'),close=document.getElementById('sideMenuClose');
  function toggle(){menu.classList.toggle('open');overlay.classList.toggle('open');}
  burger.addEventListener('click',toggle);overlay.addEventListener('click',toggle);close.addEventListener('click',toggle);
</script>
</body>
</html>
